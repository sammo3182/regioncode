<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>regioncode: Convert Region Names and Division Codes of China Over Years • regioncode</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="regioncode: Convert Region Names and Division Codes of China Over Years">
<meta property="og:description" content="regioncode">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">regioncode</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/regioncode-vignette.html">regioncode: Convert Region Names and Division Codes of China Over Years</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/sammo3182/regioncode/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="regioncode-vignette_files/header-attrs-2.7/header-attrs.js"></script><script src="regioncode-vignette_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>regioncode: Convert Region Names and Division Codes of China Over Years</h1>
                        <h4 class="author">Yue Hu, Yufei Sun, and Wenquan Wu</h4>
            
            <h4 class="date">2021-02-23</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/sammo3182/regioncode/blob/master/vignettes/regioncode-vignette.Rmd"><code>vignettes/regioncode-vignette.Rmd</code></a></small>
      <div class="hidden name"><code>regioncode-vignette.Rmd</code></div>

    </div>

    
    
<p>Inspired by Vincent Arel-Bundock’s well-known <a href="https://joss.theoj.org/papers/10.21105/joss.00848"><code>countrycode</code></a>, we created <code>regioncode</code> to achieve similar functions specifically for China studies. <code>regioncode</code> enables seamlessly converting regions’ formal names, common-used names, and administrative division codes between each other.</p>
<div id="why-regioncode" class="section level2">
<h2 class="hasAnchor">
<a href="#why-regioncode" class="anchor"></a>Why <code>regioncode</code>?</h2>
<p>The Chinese government gives unique geocodes for each county, city (prefecture), and provincial-level administrative unit. The so-called “administrative division codes” were consistently adjusted to matched national and regional plans of development. Geocode adjustments disturb researchers when they merge data with different versions of geocodes or region names. Especially, when researchers render statistical data on Chinese map, different geocodes between map data and statistical data may cause mess-up data output or visualization.</p>
<p>The package is developed to conquer such difficulties to match regional data across years more conveniently and correctly. In the current version, <code>regioncode</code> enables seamlessly converting formal names, common-used names, and division codes of Chinese prefecture regions(named ‘地级市’ in Chinese) between each other and across thirty-four years from 1986 to 2019.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>To install:</p>
<ul>
<li>the latest released version: <code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages("regioncode")</a></code>.</li>
<li>the latest developing version: <code><a href="https://remotes.r-lib.org/reference/install_github.html">remotes::install_github("sammo3182/regioncode")</a></code>.</li>
</ul>
</div>
<div id="loading-toy-data-and-the-package" class="section level2">
<h2 class="hasAnchor">
<a href="#loading-toy-data-and-the-package" class="anchor"></a>Loading Toy Data and the Package</h2>
<p>The toy data was created based on a chunk from Yuhua Wang’s <a href="https://dataverse.harvard.edu/dataset.xhtml?persistentId=doi:10.7910/DVN/9QZRAD"><code>China’s Corruption Investigations Dataset</code></a>. The data includes information on almost 20,000 officials who were investigated during Xi Jinping’s anti-corruption campaign. We randomly drew an eighteen-line sample. The division codes in the original data were based on the 2019 version. We kept the variables of prefectural names and division codes. We added a column of to short names of the prefectures to further illustrate how the software works.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">regioncode</span><span class="op">)</span>

<span class="va">corruption</span></code></pre></div>
</div>
<div id="usage-and-arguments" class="section level2">
<h2 class="hasAnchor">
<a href="#usage-and-arguments" class="anchor"></a>Usage and Arguments</h2>
<p>In <code>regioncode</code> package, we named administrative division codes as <code>code</code>, regions’ formal names as <code>name</code>, and their commonly used short names as <code>sname</code>. The current version enable to convert any pair of them mutually:</p>
<div id="division-codes-across-years" class="section level3">
<h3 class="hasAnchor">
<a href="#division-codes-across-years" class="anchor"></a>Division codes across years</h3>
<p><code>regioncoce</code> function accept numeric and character vectors as the input division codes and region names respectively. To achieve an accurate conversion, users have to specify the year of the source data correctly in the argument <code>year_from</code>. Then they can set the year they want the output is. That’s it. See the following example to convert the 2019-version codes to the 1999 version:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># original geocodes. It's 2019 version</span>
<span class="va">corruption</span><span class="op">$</span><span class="va">prefecture_id</span>

<span class="co"># after conversion. It's 1999 version</span>
<span class="fu"><a href="../reference/regioncode.html">regioncode</a></span><span class="op">(</span>data_input <span class="op">=</span> <span class="va">corruption</span><span class="op">$</span><span class="va">prefecture_id</span>, 
           year_from <span class="op">=</span> <span class="fl">2019</span>,
           year_to <span class="op">=</span> <span class="fl">1999</span><span class="op">)</span></code></pre></div>
</div>
<div id="division-codes-region-name" class="section level3">
<h3 class="hasAnchor">
<a href="#division-codes-region-name" class="anchor"></a>Division codes ↓ region name</h3>
<p>In some cases, the original data may only have division codes or region names, but users needs the other form or both formats of data. In such cases, <code>regioncode</code> offers a function to convert division codes from any year to region names in any year. Users only need to alter the converting method, for example, to “code2name” in order to convert division codes to region names.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/regioncode.html">regioncode</a></span><span class="op">(</span>data_input <span class="op">=</span> <span class="va">corruption</span><span class="op">$</span><span class="va">prefecture_id</span>, 
           year_from <span class="op">=</span> <span class="fl">2019</span>,
           year_to <span class="op">=</span> <span class="fl">1999</span>, 
           method <span class="op">=</span> <span class="st">"code2name"</span><span class="op">)</span></code></pre></div>
<p>Similarly, one can get the code from names, or in a less-often case get the names in a different year from the names from a given year. Users need to change the <code>method</code> argument to “name2code” or “name2name” to achieve these conversions.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">corruption</span><span class="op">$</span><span class="va">prefecture</span>

<span class="fu"><a href="../reference/regioncode.html">regioncode</a></span><span class="op">(</span>data_input <span class="op">=</span> <span class="va">corruption</span><span class="op">$</span><span class="va">prefecture</span>, 
           year_from <span class="op">=</span> <span class="fl">2019</span>,
           year_to <span class="op">=</span> <span class="fl">1999</span>, 
           method <span class="op">=</span> <span class="st">"name2code"</span><span class="op">)</span>

<span class="fu"><a href="../reference/regioncode.html">regioncode</a></span><span class="op">(</span>data_input <span class="op">=</span> <span class="va">corruption</span><span class="op">$</span><span class="va">prefecture</span>, 
           year_from <span class="op">=</span> <span class="fl">2019</span>,
           year_to <span class="op">=</span> <span class="fl">1999</span>, 
           method <span class="op">=</span> <span class="st">"name2name"</span><span class="op">)</span></code></pre></div>
</div>
<div id="advanced-usages" class="section level3">
<h3 class="hasAnchor">
<a href="#advanced-usages" class="anchor"></a>Advanced Usages</h3>
<p><code>regioncode</code> provides two advanced functions to achieve more complicated conversions. One of the occasions occurs when the data source includes only common-used short names of the cities instead of the full, official ones. <code>regioncode</code> can still accomplish the conversion in this case when the users specify the <code>incompleteName</code> to “from”. (<code>regioncode</code> can also produce short names from inputs of full or short names and division code. See the Details of the help file for more information.)</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Full, official names</span>
<span class="va">corruption</span><span class="op">$</span><span class="va">prefecture</span>

<span class="co"># Incomplete names</span>
<span class="va">corruption</span><span class="op">$</span><span class="va">prefecture_sname</span>

<span class="co"># Converting</span>
<span class="fu"><a href="../reference/regioncode.html">regioncode</a></span><span class="op">(</span>data_input <span class="op">=</span> <span class="va">corruption</span><span class="op">$</span><span class="va">prefecture_sname</span>, 
           year_from <span class="op">=</span> <span class="fl">2019</span>,
           year_to <span class="op">=</span> <span class="fl">1999</span>, 
           method <span class="op">=</span> <span class="st">"name2code"</span>,
           incompleteName <span class="op">=</span> <span class="st">"from"</span><span class="op">)</span></code></pre></div>
<p>Another advanced application involves in the case when the municipalities directly under the central government (“zhixiashi” in Chinese Pinyin). This is common for national survey data. <code>regioncode</code> can fit this case with no problem as long as the user sets the argument <code>zhixiashi</code> as TRUE.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># In the sample data, the division code of municipalities were coded as NA. Filling the codes of municipalities with their provinces' codes.</span>
<span class="va">code_zhixiashi</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"110000"</span>, <span class="st">"120000"</span>, <span class="st">"310000"</span>, <span class="st">"400000"</span><span class="op">)</span>

<span class="va">corruption</span> <span class="op">&lt;-</span> <span class="va">corruption</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>prefecture_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">province_id</span> <span class="op">%in%</span> <span class="va">code_zhixiashi</span>, <span class="va">province_id</span>, <span class="va">prefecture_id</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Converting</span>

<span class="fu"><a href="../reference/regioncode.html">regioncode</a></span><span class="op">(</span>data_input <span class="op">=</span> <span class="va">corruption</span><span class="op">$</span><span class="va">prefecture_id</span>, 
           year_from <span class="op">=</span> <span class="fl">2019</span>,
           year_to <span class="op">=</span> <span class="fl">1999</span>,
           zhixiashi <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="conclusion" class="section level2">
<h2 class="hasAnchor">
<a href="#conclusion" class="anchor"></a>Conclusion</h2>
<p><code>regioncode</code> rovides a convenient way to convert Chinese administrative division codes, official names, and common-used short names between each other. This vignette offers a quick view of package features and a short tutorial for users.</p>
<p>The development of the package is ongoing. Future versions aim to add more administrative level choice, from province level to county level. Data are also enriching. Please contact us with any questions, bug reports, and comments.</p>
</div>
<div id="affiliation" class="section level2">
<h2 class="hasAnchor">
<a href="#affiliation" class="anchor"></a>Affiliation</h2>
<p>Dr. Yue Hu</p>
<p>Department of Political Science,<br>
Tsinghua University,<br>
Email: <a href="mailto:yuehu@tsinghua.edu.cn" class="email">yuehu@tsinghua.edu.cn</a><br>
Website: <a href="https://sammo3182.github.io" class="uri">https://sammo3182.github.io</a></p>
<p>Yufei Sun</p>
<p>Department of Political Science,<br>
Tsinghua University,<br>
Email: <a href="mailto:sunyf20@mails.tsinghua.edu.cn" class="email">sunyf20@mails.tsinghua.edu.cn</a></p>
<p>Wenquan Wu</p>
<p>Department of Political Science,<br>
Tsinghua University,<br>
Email: <a href="mailto:wuwq20@mails.tsinghua.edu.cn" class="email">wuwq20@mails.tsinghua.edu.cn</a></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Yue Hu, Yufei Sun, Wenquan Wu.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
