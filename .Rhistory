#数据处理#
table_1987_1 <- table_1987[[1]][-c(1,2,3), -c(1,4,5,6,7,8,9)]
head(table_1987_1)
prov <- str_sub(table_1987_1[,1], 1, 2) #选取前两位省代号
prov_coun <- str_sub(table_1987_1[,1], 3, 4) #选取中间两位以区分省直辖县
city <- str_sub(table_1987_1[,1], 5, 6) #选取最后两位以区分地级市
table_1987_2 <- data.frame(table_1987_1, prov, prov_coun, city)
#河北省1987年数据#
hebei_1987_1 <-
subset(
table_1987_2,
table_1987_2[,3]==13 & (table_1987_2[,5]=="00" | table_1987_2[,4]=="90")
)
hebei_1987 <- hebei_1987_1[,-c(3,4,5)]
#辽宁省1987年数据#
liaoning_1987_1 <-
subset(
table_1987_2,
table_1987_2[,3]==21 & (table_1987_2[,5]=="00" | table_1987_2[,4]=="90")
)
liaoning_1987 <- liaoning_1987_1[,-c(3,4,5)]
#吉林省1987年数据#
jilin_1987_1 <-
subset(
table_1987_2,
table_1987_2[,3]==22 & (table_1987_2[,5]=="00" | table_1987_2[,4]=="90")
)
jilin_1987 <- jilin_1987_1[,-c(3,4,5)]
#黑龙江省1987年数据#
heilongjiang_1987_1 <-
subset(
table_1987_2,
table_1987_2[,3]==23 & (table_1987_2[,5]=="00" | table_1987_2[,4]=="90")
)
heilongjiang_1987 <- heilongjiang_1987_1[,-c(3,4,5)]
View(jilin_1987)
View(hebei_1987)
View(liaoning_1987)
library(tidyverse)
library(tidyverse)
library(rvest)
library(tidyverse)
library(stringr)
#爬取主页面#
web <- vector("list", 3)
web_base <- "http://www.mca.gov.cn/article/sj/xzqh/1980/?"
web[[1]] <- read_html(web_base)
for(i in 1:2)
{
web_m <- paste0(web_base,i+1)
web[[i+1]] <- read_html(web_m)
i = i+1
}
#爬取每年的网站链接#
year_link <- vector("list", 3)
for(i in 1:3)
{
year_link[[i]] <- html_nodes(web[[i]], "div.alist a") %>% html_attr("href")
i = i+1
}
head(year_link)
web[[1]][14]
year_link[[1]][14]
k <- year_link[[1]][14] %>% read_html() %>% html_table()
k <- paste0("http://mac.gov.cn",year_link[[1]][14]) %>% read_html() %>% html_table()
paste0("http://mac.gov.cn",year_link[[1]][14])
l <- paste0("http://mac.gov.cn",year_link[[1]][14])
k <- l %>% read_html() %>% html_table()
l <- paste0("http://www.mca.gov.cn",year_link[[1]][14])
k <- l %>% read_html() %>% html_table()
k <- l %>% read_html() %>% html_nodes("table")
View(k)
devtools::install_github(repo = "Rwebdriver", username = "crubba")
library(Rwerdbriver)
devtools::install_github("crubba/Rwebdriver")
install.packages("devtools")
library(devtools)
devtools::install_github("crubba/Rwebdriver")
library(Rwerdbriver)
library(Rwerbdriver)
library(Rwebdriver)
m <- post.url(l)
m <- post.url(url = l)
l <- paste0("http://www.mca.gov.cn",year_link[[1]][14])
m <- post.url(url = l)
m <- post.url(url = l)
try_1 <- page_source()
start_session(browser = "chrome")
post.url(url = l)
pageneeded <- page_source()
start_session(browser = "chrome")
post.url(url = "http://www.mca.gov.cn/article/sj/xzqh/1980/201507/20150715854916.shtml")
pageneeded <- page_source()
library(Rwebdriver)
install.packages("RCurl")
install.packages("XML")
library(XML)
library(RCurl)
start_session(browser = "chrome")
post.url(url = "http://www.mca.gov.cn/article/sj/xzqh/1980/201507/20150715854916.shtml")
pageneeded <- page_source()
start_session(root = "http//localhost:4444/wd/hub", browser = "chrome")
post.url(url = "http://www.mca.gov.cn/article/sj/xzqh/1980/201507/20150715854916.shtml")
pageneeded <- page_source()
library(rvest)
library(tidyverse)
library(stringr)
library(devtools)
library(Rwebdriver)
library(XML)
library(RCurl)
install.packages("XML")
#爬取主页面#
web <- vector("list", 3)
web_base <- "http://www.mca.gov.cn/article/sj/xzqh/1980/?"
web[[1]] <- read_html(web_base)
for(i in 1:2)
{
web_m <- paste0(web_base,i+1)
web[[i+1]] <- read_html(web_m)
i = i+1
}
#爬取每年的网站链接#
year_link <- vector("list", 3)
for(i in 1:3)
{
year_link_m[[i]] <- html_nodes(web[[i]], "div.alist a") %>% html_attr("href")
i = i+1
}
head(year_link_m)
for(i in 1:3)
{
year_link[[i]] <- paste0("http://www.mca.gov.cn", year_link_m[[i]])
i = i+1
}
install.packages("XML")
#爬取主页面#
web <- vector("list", 3)
web_base <- "http://www.mca.gov.cn/article/sj/xzqh/1980/?"
web[[1]] <- read_html(web_base)
for(i in 1:2)
{
web_m <- paste0(web_base,i+1)
web[[i+1]] <- read_html(web_m)
i = i+1
}
#爬取每年的网站链接#
year_link <- vector("list", 3)
for(i in 1:3)
{
year_link_m[[i]] <- html_nodes(web[[i]], "div.alist a") %>% html_attr("href")
i = i+1
}
head(year_link_m)
for(i in 1:3)
{
year_link[[i]] <- paste0("http://www.mca.gov.cn", year_link_m[[i]])
i = i+1
}
#爬取每年的网站链接#
year_link <- vector("list", 3)
year_link_m <- vector("list", 3)
for(i in 1:3)
{
year_link_m[[i]] <- html_nodes(web[[i]], "div.alist a") %>% html_attr("href")
i = i+1
}
head(year_link_m)
for(i in 1:3)
{
year_link[[i]] <- paste0("http://www.mca.gov.cn", year_link_m[[i]])
i = i+1
}
View(year_link_m)
head(year_link)
2019 - 1986
load("./R/data/region_data_all.rda")
class("good")
?switch
library(dplyr)
?case_when
library(regioncode)
4000
library(dplyr)
region_table <- readRDS("../data/region_data_all.rds")
region_table <- readRDS("data/region_data_all.rds")
name_zhixiashi <- c("北京", "天津", "上海", "重庆")
region_table <- region_table %>%
mutate(zhixiashi = prov_name %in% name_zhixiashi)
saveRDS("data/region_data_all.rds")
saveRDS(region_table, "data/region_data_all.rds")
library(regioncode)
library(regioncode)
save(region_table, "../data/region_data_all.rda")
save(region_table, "data/region_data_all.rda")
saveRDS(region_table, "data/region_data_all.rda")
load("data/region_data_all.rda")
region_table <- readRDS("data/region_data_all.rds")
?save
save(region_table, "data/region_data_all.Rdata")
save(region_table, "data/region_data_all.RData")
save(region_table, "region_data_all.RData")
save(region_table, file = "data/region_data_all.RData")
load("data/region_data_all.RData")
library(regioncode)
library(regioncode)
usethis::use_build_ignore("data_preparation")
library(regioncode)
library(regioncode)
df_toy <- readRDS("data/df_toy.rds")
View(df_toy)
load("D:/Dropbox/Seafile/WW/01_Instruction/Research/R packages/regioncode/dev/corruption_data.rda")
load("corruption_data.rda")
load("dev/corruption_data.rda")
Sys.setlocale(category = "LC_COLLATE", locale = "Chinese")
Sys.setlocale(category = "LC_CTYPE", locale = "Chinese")
load("dev/corruption_data.rda")
library(dplyr)
?sample_n
df_toy <- vignette_data %>%
group_by(province) %>%
slice_sample(n = 2)
set.seed(313)
load("dev/corruption_data.rda")
df_toy <- vignette_data %>%
group_by(province) %>%
slice_sample(n = 2)
usethis::use_data(df_toy)
load("data/region_data_all.RData")
name_zhixiashi <- c("北京","天津", "上海", "重庆")
region_table <- region_table %>%
mutate(zhixiashi = prov_name %in% name_zhixiashi)
usethis::use_data(region_table)
?usethis::use_data
set.seed(313)
# Toy data for illustration
load("dev/corruption_data.rda")
toy <- vignette_data %>%
group_by(province) %>%
slice_sample(n = 2)
usethis::use_data(toy, overwrite = TRUE)
set.seed(313)
# Toy data for illustration
load("dev/corruption_data.rda")
corruption <- vignette_data %>%
group_by(province) %>%
slice_sample(n = 2)
usethis::use_data(corruption, overwrite = TRUE)
?data
library(regioncode)
data(corruption)
force(corruption)
library(regioncode)
library(regioncode)
load("dev/corruption_data.rda")
set.seed(313)
corruption <- vignette_data %>%
group_by(province) %>%
slice_sample(n = 2)
View(corruption)
corruption <- vignette_data %>%
group_by(province) %>%
slice_sample(n = 2) %>%
ungroup() %>%
mutate(prefecture_sname = gsub("市|县|自治.*$", "", prefecture))
set.seed(313)
corruption <- vignette_data %>%
group_by(province) %>%
slice_sample(n = 2) %>%
ungroup() %>%
mutate(prefecture_sname = gsub("市|县|.*族自治.*$", "", prefecture))
set.seed(313)
corruption <- vignette_data %>%
group_by(province) %>%
slice_sample(n = 2) %>%
ungroup() %>%
mutate(prefecture_sname = gsub("市|区|县|.*族自治.*$", "", prefecture))
set.seed(313)
corruption <- vignette_data %>%
group_by(province) %>%
slice_sample(n = 2) %>%
ungroup() %>%
mutate(prefecture_sname = gsub("市|区|县|\\w{1,2}族自治.*$", "", prefecture))
?gsub
gsub("市|区|县|[\\p{Han}{1, 2}]自治.*$", "", "石柱土家族自治县", perl = TRUE)
gsub("市|区|县|[\\p{Han}]族自治.*$", "", "石柱土家族自治县", perl = TRUE)
gsub("市|区|县|\\p{Han}{2}族自治.*$", "", "石柱土家族自治县", perl = TRUE)
set.seed(313)
load("dev/corruption_data.rda")
corruption <- vignette_data %>%
group_by(province) %>%
slice_sample(n = 2) %>%
ungroup() %>%
mutate(prefecture_sname = gsub("市|区|县|[\\p{Han}]自治.*$", "", prefecture, perl = TRUE))
ls_official <- c("壮族自治.*$|回族自治.*$|满族自治.*$|维吾尔族自治.*$|苗族自治.*$|彝族自治.*$|土家族自治.*$|藏族自治.*$|蒙古族自治.*$|侗族自治.*$|布依族自治.*$|瑶族自治.*$|白族自治.*$|朝鲜族自治.*$|哈尼族自治.*$|黎族自治.*$|哈萨克族自治.*$|傣族自治.*$|畲族自治.*$|傈僳族自治.*$|东乡族自治.*$|仡佬族自治.*$|拉祜族自治.*$|佤族自治.*$|水族自治.*$|纳西族自治.*$| 羌族自治.*$| 土族自治.*$| 仫佬族自治.*$| 锡伯族自治.*$| 柯尔克孜族自治.*$|景颇族自治.*$|达斡尔族自治.*$|撒拉族自治.*$|布朗族自治.*$|毛南族自治.*$|塔吉克族自治.*$|普米族自治.*$|阿昌族自治.*$|怒族自治.*$|鄂温克族自治.*$|京族自治.*$|基诺族自治.*$|德昂族自治.*$|保安族自治.*$|俄罗斯族自治.*$|裕固族自治.*$|乌孜别克族自治.*$|门巴族自治.*$|鄂伦春族自治.*$|独龙族自治.*$|赫哲族自治.*$|高山族自治.*$|珞巴族自治.*$|塔塔尔族自治.*$|市|区|州|县")
name_official <- c("壮族自治.*$|回族自治.*$|满族自治.*$|维吾尔族自治.*$|苗族自治.*$|彝族自治.*$|土家族自治.*$|藏族自治.*$|蒙古族自治.*$|侗族自治.*$|布依族自治.*$|瑶族自治.*$|白族自治.*$|朝鲜族自治.*$|哈尼族自治.*$|黎族自治.*$|哈萨克族自治.*$|傣族自治.*$|畲族自治.*$|傈僳族自治.*$|东乡族自治.*$|仡佬族自治.*$|拉祜族自治.*$|佤族自治.*$|水族自治.*$|纳西族自治.*$| 羌族自治.*$| 土族自治.*$| 仫佬族自治.*$| 锡伯族自治.*$| 柯尔克孜族自治.*$|景颇族自治.*$|达斡尔族自治.*$|撒拉族自治.*$|布朗族自治.*$|毛南族自治.*$|塔吉克族自治.*$|普米族自治.*$|阿昌族自治.*$|怒族自治.*$|鄂温克族自治.*$|京族自治.*$|基诺族自治.*$|德昂族自治.*$|保安族自治.*$|俄罗斯族自治.*$|裕固族自治.*$|乌孜别克族自治.*$|门巴族自治.*$|鄂伦春族自治.*$|独龙族自治.*$|赫哲族自治.*$|高山族自治.*$|珞巴族自治.*$|塔塔尔族自治.*$|市|区|州|县")
gsub(name_official, "", "石柱土家族自治县", perl = TRUE)
set.seed(313)
name_official <- c("壮族自治.*$|回族自治.*$|满族自治.*$|维吾尔族自治.*$|苗族自治.*$|彝族自治.*$|土家族自治.*$|藏族自治.*$|蒙古族自治.*$|侗族自治.*$|布依族自治.*$|瑶族自治.*$|白族自治.*$|朝鲜族自治.*$|哈尼族自治.*$|黎族自治.*$|哈萨克族自治.*$|傣族自治.*$|畲族自治.*$|傈僳族自治.*$|东乡族自治.*$|仡佬族自治.*$|拉祜族自治.*$|佤族自治.*$|水族自治.*$|纳西族自治.*$| 羌族自治.*$| 土族自治.*$| 仫佬族自治.*$| 锡伯族自治.*$| 柯尔克孜族自治.*$|景颇族自治.*$|达斡尔族自治.*$|撒拉族自治.*$|布朗族自治.*$|毛南族自治.*$|塔吉克族自治.*$|普米族自治.*$|阿昌族自治.*$|怒族自治.*$|鄂温克族自治.*$|京族自治.*$|基诺族自治.*$|德昂族自治.*$|保安族自治.*$|俄罗斯族自治.*$|裕固族自治.*$|乌孜别克族自治.*$|门巴族自治.*$|鄂伦春族自治.*$|独龙族自治.*$|赫哲族自治.*$|高山族自治.*$|珞巴族自治.*$|塔塔尔族自治.*$|市|区|州|县")
corruption <- vignette_data %>%
group_by(province) %>%
slice_sample(n = 2) %>%
ungroup() %>%
mutate(prefecture_sname = gsub(name_official, "", prefecture, perl = TRUE))
set.seed(313)
load("dev/corruption_data.rda")
name_official <- c("壮族自治.*$|回族自治.*$|满族自治.*$|维吾尔族自治.*$|苗族自治.*$|彝族自治.*$|土家族自治.*$|藏族自治.*$|蒙古族自治.*$|侗族自治.*$|布依族自治.*$|瑶族自治.*$|白族自治.*$|朝鲜族自治.*$|哈尼族自治.*$|黎族自治.*$|哈萨克族自治.*$|傣族自治.*$|畲族自治.*$|傈僳族自治.*$|东乡族自治.*$|仡佬族自治.*$|拉祜族自治.*$|佤族自治.*$|水族自治.*$|纳西族自治.*$|羌族自治.*$| 土族自治.*$|仫佬族自治.*$| 锡伯族自治.*$| 柯尔克孜族自治.*$|景颇族自治.*$|达斡尔族自治.*$|撒拉族自治.*$|布朗族自治.*$|毛南族自治.*$|塔吉克族自治.*$|普米族自治.*$|阿昌族自治.*$|怒族自治.*$|鄂温克族自治.*$|京族自治.*$|基诺族自治.*$|德昂族自治.*$|保安族自治.*$|俄罗斯族自治.*$|裕固族自治.*$|乌孜别克族自治.*$|门巴族自治.*$|鄂伦春族自治.*$|独龙族自治.*$|赫哲族自治.*$|高山族自治.*$|珞巴族自治.*$|塔塔尔族自治.*$|市|区|州|县")
corruption <- vignette_data %>%
group_by(province) %>%
slice_sample(n = 2) %>%
ungroup() %>%
mutate(prefecture_sname = gsub(name_official, "", prefecture, perl = TRUE))
usethis::use_data(corruption, overwrite = TRUE)
library(regioncode)
View(corruption)
load("data/region_data_all.RData")
load("data/region_data_all.rda")
load("data/region_data.rda")
load("../data/region_data.rda")
file.exists("../data/region_data.rda")
file.exists("data/region_data.rda")
getwd()
load("data/region_table.rda")
code_zhixiashi <- c("110", "120", "310", "400")
load("data/region_table.rda")
code_zhixiashi <- c("110000", "120000", "310000", "400000")
region_table <- region_table %>%
mutate(zhixiashi = prov_code %in% code_zhixiashi)
usethis::use_data(region_table, overwrite = TRUE)
data(corruption)
force(corruption)
corruption <- corruption %>%
mutate(prefecture_id = ifelse(province_id %in% code_zhixiashi, province_id, prefecture_id))
regioncode(data_input = corruption$prefecture_id,
year_from = 2019,
year_to = 1999,
zhixiashi = TRUE)
library(regioncode)
library(regioncode)
Sys.setlocale(category = "LC_COLLATE", locale = "Chinese")
Sys.setlocale(category = "LC_CTYPE", locale = "Chinese")
Sys.setlocale(category = "LC_COLLATE", locale = "Chinese")
Sys.setlocale(category = "LC_CTYPE", locale = "Chinese")
library(regioncode)
data(corruption)
head(corruption)
# original geocodes. It's 2019 version
corruption$prefecture_id
# after conversion. It's 2005 version
regioncode(data_input = corruption$prefecture_id,
year_from = 2019,
year_to = 1999)
regioncode(data_input = corruption$prefecture_id,
year_from = 2019,
year_to = 1999,
method = "code2name")
corruption$prefecture
regioncode(data_input = corruption$prefecture,
year_from = 2019,
year_to = 1999,
method = "name2code")
regioncode(data_input = corruption$prefecture,
year_from = 2019,
year_to = 1999,
method = "name2name")
# Full, official names
corruption$prefecture
# Incomplete names
corruption$prefecture_sname
# Converting
regioncode(data_input = corruption$prefecture_sname,
year_from = 2019,
year_to = 1999,
method = "name2code",
incompleteName = "from")
# In the sample data, the division code of municipalities were coded as NA. Filling the codes of municipalities with their provinces' codes.
code_zhixiashi <- c("110000", "120000", "310000", "400000")
corruption <- corruption %>%
mutate(prefecture_id = ifelse(province_id %in% code_zhixiashi, province_id, prefecture_id))
# Converting
regioncode(data_input = corruption$prefecture_id,
year_from = 2019,
year_to = 1999,
zhixiashi = TRUE)
`%>%`
?`%>%`
library(regioncode)
library(regioncode)
regioncode("110000")
library(regioncode)
regioncode("110000")
regioncode(110000)
?data
library(regioncode)
regioncode(110000)
Sys.which(Sys.getenv("R_QPDF", "qpdf.exe"))
Sys.which(Sys.getenv("R_QPDF", "qpdf"))
Sys.setenv('PATH' = paste0('"D:\userLib\qpdf\R";', Sys.getenv('PATH')))
Sys.setenv('PATH' = paste0('D:\userLib\qpdf\R;', Sys.getenv('PATH')))
Sys.which(Sys.getenv("R_QPDF", "qpdf"))
Sys.which(Sys.getenv("R_QPDF", "qpdf"))
Sys.which(Sys.getenv("R_QPDF", "qpdf"))
Sys.which(Sys.getenv("R_QPDF", "qpdf"))
?Sys.getenv
Sys.which(Sys.getenv("R_QPDF", "qpdf.dll"))
Sys.getenv("PATH")
Sys.getenv("PATH")
Sys.which(Sys.getenv("R_QPDF", "qpdf"))
load("/Users/sunyufei/Documents/GitHub/regioncode/data/region_table.rda")
View(region_table)
p_load(
rvest
)
library(pacman)
p_load(
rvest
)
cityname <- read_html("https://learn.tsinghua.edu.cn/f/wlxt/qz/v_wlkc_qzcyb/xsxx/teacher/beforePageXsList?wlkcid=2020-2021-2142099194") %>%
html_nodes("img , p , .flex-right") %>%
html_text()
cityname
# create a session
url.address <-"https://learn.tsinghua.edu.cn/f/wlxt/index/course/teacher/course?wlkcid=2020-2021-2142099194"
pgsession <-html_session(url.address)
# create a session
url.address <-"https://learn.tsinghua.edu.cn/f/login"
pgsession <-html_session(url.address)
## 抓取填寫帳密欄位的表格（這邊的2是要根據每個人所登入的網頁不同調整，這邊帳密表格剛好在第2個）
pgform <- html_form(pgsession)[[1]]
View(pgform)
## 抓取填寫帳密欄位的表格（這邊的2是要根據每個人所登入的網頁不同調整，這邊帳密表格剛好在第2個）
pgform <- html_form(pgsession)
View(pgform)
## 抓取填寫帳密欄位的表格（這邊的2是要根據每個人所登入的網頁不同調整，這邊帳密表格剛好在第2個）
pgform <- html_form(pgsession)[[1]]
View(pgform)
View(pgform)
`i_pass` = 3597075212665hjh")
filled_form <- set_values(pgform,
`i_user` = "sunyf20",
`i_pass` = 3597075212665hjh")
filled_form <- set_values(pgform,
`i_user` = "sunyf20",
`i_pass` = "3597075212665hjh")
url.address <- "https://learn.tsinghua.edu.cn/f/login"
pgsession <- html_session(url.address)
pgform <- html_form(pgsession)[[1]]
filled_form <- set_values(pgform,
`i_user` = "sunyf20",
`i_pass` = "3597075212665hjh")
submit_form(pgsession,filled_form)
## 接者要跳轉入自己真正有興趣的網頁
rs.url.address <- ""https://learn.tsinghua.edu.cn/f/wlxt/qz/v_wlkc_qzcyb/xsxx/teacher/beforePageXsList?wlkcid=2020-2021-2142099194""
## 接者要跳轉入自己真正有興趣的網頁
rs.url.address <- "https://learn.tsinghua.edu.cn/f/wlxt/qz/v_wlkc_qzcyb/xsxx/teacher/beforePageXsList?wlkcid=2020-2021-2142099194"
# 使用jump_to函數在此session中送出url request（模擬個人瀏覽網頁的狀況）
web.page <- jump_to(pgsession, rs.url.address) %>%
read_html
cityname <- read_html("https://learn.tsinghua.edu.cn/f/wlxt/qz/v_wlkc_qzcyb/xsxx/teacher/beforePageXsList?wlkcid=2020-2021-2142099194") %>%
html_nodes("img , p , .flex-right") %>%
html_text()
cityname <- read_html("https://learn.tsinghua.edu.cn/f/wlxt/qz/v_wlkc_qzcyb/xsxx/teacher/beforePageXsList?wlkcid=2020-2021-2142099194") %>%
html_nodes("img , p , .flex-right") %>%
html_text()
## 接者要跳轉入自己真正有興趣的網頁
rs.url.address <- "https://learn.tsinghua.edu.cn/f/login"
# 使用jump_to函數在此session中送出url request（模擬個人瀏覽網頁的狀況）
web.page <- jump_to(pgsession, rs.url.address) %>%
read_html
cityname <- read_html("https://learn.tsinghua.edu.cn/f/wlxt/qz/v_wlkc_qzcyb/xsxx/teacher/beforePageXsList?wlkcid=2020-2021-2142099194") %>%
html_nodes("img , p , .flex-right") %>%
html_text()
## 接者要跳轉入自己真正有興趣的網頁
rs.url.address <- "https://learn.tsinghua.edu.cn/f/wlxt/qz/v_wlkc_qzcyb/xsxx/teacher/beforePageXsList?wlkcid=2020-2021-2142099194"
# 使用jump_to函數在此session中送出url request（模擬個人瀏覽網頁的狀況）
web.page <- jump_to(pgsession, rs.url.address) %>%
read_html
cityname <- read_html("https://learn.tsinghua.edu.cn/f/wlxt/qz/v_wlkc_qzcyb/xsxx/teacher/beforePageXsList?wlkcid=2020-2021-2142099194") %>%
html_nodes("img , p , .flex-right") %>%
html_text()
url.address <- "https://learn.tsinghua.edu.cn/f/login"
pgsession <- html_session(url.address)
filled_form <- set_values(pgform,
`i_user` = "sunyf20",
`i_pass` = "3597075212665hjh")
submit_form(pgsession,filled_form)
library(regioncode)
regioncode(data_input = "郑州",
year_from = 2019,
year_to = 1999,
method = "code2name")
regioncode(data_input = "郑州",
year_from = 2019,
year_to = 1999,
method = "name2name")
regioncode(data_input = "郑州",
year_from = 2018,
year_to = 1999,
method = "name2name")
regioncode(data_input = "郑州市",
year_from = 2019,
year_to = 1999,
method = "name2name")
library(regioncode)
devtools::document()
library(regioncode)
install(build_vignettes = TRUE)
devtools::install(build_vignettes = TRUE)
devtools::build_vignettes()
devtools::document()
?devtools::build()
devtools::build(vignettes = TRUE)
