regioncode(data_input = corruption$prefecture_id,
convert_to = "code", # default set
year_from = 2019,
year_to = 1989)
# The original name
corruption$prefecture
# Codes to name
regioncode(data_input = corruption$prefecture_id,
convert_to = "name",
year_from = 2019,
year_to = 1989)
# Name to codes of the same year
regioncode(data_input = corruption$prefecture,
convert_to = "code",
year_from = 2019,
year_to = 2019)
# Name to name of a different year
regioncode(data_input = corruption$prefecture,
convert_to = "name",
year_from = 2019,
year_to = 1989)
tibble(
preference = corruption$prefecture,
rank = regioncode(data_input = corruption$prefecture,
year_from = 2011,
year_to = 1989,
convert_to="rank")
)
tidyr::tibble(
preference = corruption$prefecture,
rank = regioncode(data_input = corruption$prefecture,
year_from = 2011,
year_to = 1989,
convert_to="rank")
)
load("D:/Seafile/WW_research/01_Research/R_package/regioncode/R/sysdata.rda")
region_data |> names()
knitr::opts_chunk$set(message = FALSE, warning = FALSE)
if(!require(regioncode)) install.packages("regioncode")
tibble(
code2019 = corruption$prefecture_id,
code1989 = regioncode(data_input = corruption$prefecture_id,
convert_to = "code", # default set
year_from = 2019,
year_to = 1989),
name1989 = regioncode(data_input = corruption$prefecture_id,
convert_to = "name", # default set
year_from = 2019,
year_to = 1989)
)
library(tidyverse)
tibble(
code2019 = corruption$prefecture_id,
code1989 = regioncode(data_input = corruption$prefecture_id,
convert_to = "code", # default set
year_from = 2019,
year_to = 1989),
name1989 = regioncode(data_input = corruption$prefecture_id,
convert_to = "name", # default set
year_from = 2019,
year_to = 1989)
)
temp2 <- corruption$prefecture_id
# 1989 version
temp <- regioncode(data_input = corruption$prefecture_id,
convert_to = "code", # default set
year_from = 2019,
year_to = 1989)
View(region_data)
usethis::git_vaccinate() #Adds .DS_Store, .Rproj.user, .Rdata, .Rhistory, and .httr-oauth to your global (a.k.a. user-level) .gitignore. This is good practice as it decreases the chance that you will accidentally leak credentials to GitHub.
library(regioncode)
knitr::opts_chunk$set(message = FALSE, warning = FALSE)
if(!require(regioncode)) install.packages("regioncode")
library(regioncode)
library(tidyverse)
library(regioncode)
data("corruption")
# Original 2019 version
corruption$prefecture_id
# 1989 version
temp <- regioncode(data_input = corruption$prefecture_id,
convert_to = "code", # default set
year_from = 2019,
year_to = 1989)
# tibble(
#   code2019 = corruption$prefecture_id,
#   code1989 = regioncode(data_input = corruption$prefecture_id,
#            convert_to = "code", # default set
#            year_from = 2019,
#            year_to = 1989),
#   name1989 = regioncode(data_input = corruption$prefecture_id,
#            convert_to = "name", # default set
#            year_from = 2019,
#            year_to = 1989)
# )
load("D:/Seafile/WW_research/01_Research/R_package/regioncode/R/sysdata.rda")
# Original 2019 version
corruption$prefecture_id
# 1989 version
temp <- regioncode(data_input = corruption$prefecture_id,
convert_to = "code", # default set
year_from = 2019,
year_to = 1989)
tibble(
code2019 = corruption$prefecture_id,
code1989 = regioncode(data_input = corruption$prefecture_id,
convert_to = "code", # default set
year_from = 2019,
year_to = 1989),
name1989 = regioncode(data_input = corruption$prefecture_id,
convert_to = "name", # default set
year_from = 2019,
year_to = 1989)
)
tibble(
code2019 = corruption$prefecture_id,
code1989 = regioncode(data_input = corruption$prefecture_id,
convert_to = "code", # default set
year_from = 2019,
year_to = 1989),
name2019 = regioncode(data_input = corruption$prefecture_id,
convert_to = "name", # default set
year_from = 2019,
year_to = 2019),
name1989 = regioncode(data_input = corruption$prefecture_id,
convert_to = "name", # default set
year_from = 2019,
year_to = 1989)
)
?regioncode
# Original full names
corruption$prefecture
# Convert to incomplete names in 1989
fake_incomplete <- regioncode(data_input = corruption$prefecture,
convert_to = "name",
year_from = 2019,
year_to = 1989,
incomplete_name = "to")
fake_incomplete
# Convert to full names in 2008
fake_full <- regioncode(data_input = fake_incomplete,
convert_to = "name",
year_from = 1989,
year_to = 2008,
incomplete_name = "to")
fake_full
names_municipality <- c("北京", "天津", "上海", "重庆")
names_municipality <- c("北京", "天津", "上海", "重庆")
regioncode(data_input = names_municipality,
year_from = 2019,
year_to = 2019,
convert_to = "code",
zhixiashi = FALSE)
regioncode(data_input = names_municipality,
year_from = 2019,
year_to = 2019,
convert_to = "code",
zhixiashi = TRUE)
regioncode(data_input = names_municipality,
year_from = 2019,
year_to = 2019,
convert_to = "code",
zhixiashi = TRUE)
names_municipality <- c("北京", "海淀区", "上海", "静安区")
regioncode(data_input = names_municipality,
year_from = 2019,
year_to = 2019,
convert_to = "code",
zhixiashi = FALSE)
regioncode(data_input = names_municipality,
year_from = 2019,
year_to = 2019,
convert_to = "code",
zhixiashi = TRUE)
library(reprex)
names_municipality <- c("北京", # Beijing, a municipality
"海淀区", # A district of Beijing
"上海", # Shanghai, a municipality
"静安区", # A district of Shanghai
"济南市") # A prefecture of Shandong
# When `zhixiashi` is FALSE, only the districts are recognized
regioncode(data_input = names_municipality,
year_from = 2019,
year_to = 2019,
convert_to = "code",
zhixiashi = FALSE)
# When `zhixiashi` is TRUE, muncipalities are
regioncode(data_input = names_municipality,
year_from = 2019,
year_to = 2019,
convert_to = "code",
zhixiashi = TRUE)
reprex(
{
regioncode(data_input = names_municipality,
year_from = 2019,
year_to = 2019,
convert_to = "code",
zhixiashi = FALSE)
# When `zhixiashi` is TRUE, muncipalities are
regioncode(data_input = names_municipality,
year_from = 2019,
year_to = 2019,
convert_to = "code",
zhixiashi = TRUE)
}
)
reprex(
{
names_municipality <- c("北京", # Beijing, a municipality
"海淀区", # A district of Beijing
"上海", # Shanghai, a municipality
"静安区", # A district of Shanghai
"济南市") # A prefecture of Shandong
regioncode(data_input = names_municipality,
year_from = 2019,
year_to = 2019,
convert_to = "code",
zhixiashi = FALSE)
# When `zhixiashi` is TRUE, muncipalities are
regioncode(data_input = names_municipality,
year_from = 2019,
year_to = 2019,
convert_to = "code",
zhixiashi = TRUE)
}
)
names_municipality <- c("北京", # Beijing, a municipality
"海淀区", # A district of Beijing
"上海", # Shanghai, a municipality
"静安区", # A district of Shanghai
"济南市") # A prefecture of Shandong
regioncode(data_input = names_municipality,
year_from = 2019,
year_to = 2019,
convert_to = "code",
zhixiashi = FALSE)
reprex(
{
library(regioncode)
names_municipality <- c("北京", # Beijing, a municipality
"海淀区", # A district of Beijing
"上海", # Shanghai, a municipality
"静安区", # A district of Shanghai
"济南市") # A prefecture of Shandong
regioncode(data_input = names_municipality,
year_from = 2019,
year_to = 2019,
convert_to = "code",
zhixiashi = FALSE)
# When `zhixiashi` is TRUE, muncipalities are
regioncode(data_input = names_municipality,
year_from = 2019,
year_to = 2019,
convert_to = "code",
zhixiashi = TRUE)
}
)
?reprex
tibble(
province = corruption$province_id,
prov_name = regioncode(data_input = corruption$province_id,
convert_to = "name",
year_from = 2019,
year_to = 1989,
province = TRUE),
prov_abbre = regioncode(data_input = corruption$province_id,
convert_to = "codeToabbre",
year_from = 2019,
year_to = 1989,
province = TRUE)
)
source("~/.active-rstudio-document", echo=TRUE)
tibble(
province = corruption$province_id,
prov_name = regioncode(data_input = corruption$province_id,
convert_to = "name",
year_from = 2019,
year_to = 2019,
province = TRUE),
prov_abbre = regioncode(data_input = corruption$province_id,
convert_to = "codeToabbre",
year_from = 2019,
year_to = 1989,
province = TRUE)
)
reprex(
{
library(regioncode)
regioncode(data_input = corruption$province_id,
convert_to = "name",
year_from = 2019,
year_to = 1989,
province = TRUE)
}
)
regioncode(data_input = corruption$prefecture,
year_from = 2019,
year_to = 1989,
convert_to = "name",
to_pinyin = TRUE
)
regioncode(data_input = corruption$prefecture,
year_from = 2019,
year_to = 1989,
convert_to = "name",
incomplete_name = "to",
to_pinyin = TRUE
)
regioncode(data_input = corruption$prefecture,
year_from = 2019,
year_to = 1989,
convert_to = "area",
to_pinyin = TRUE
)
regioncode(data_input = c("山西", "陕西", "内蒙古", "香港"),
year_from = 2019,
year_to = 2008,
convert_to = "name",
incomplete_name = "from",
to_pinyin = TRUE
)
regioncode(data_input = c("山西省", "陕西省", "内蒙古自治区"),
year_from = 2019,
year_to = 2008,
convert_to = "name",
to_pinyin = TRUE
)
reprex(
{
library(regioncode)
regioncode(data_input = c("山西", "陕西", "内蒙古", "香港"),
year_from = 2019,
year_to = 2008,
convert_to = "name",
incomplete_name = "from",
to_pinyin = TRUE
)
}
)
# Regions with special spelling
regioncode(data_input = c("山西", "陕西", "内蒙古", "香港", "澳门"),
year_from = 2019,
year_to = 2008,
convert_to = "name",
incomplete_name = "from",
province = TRUE,
to_pinyin = TRUE
)
# Regions with special spelling
regioncode(data_input = c("山西", "陕西", "内蒙古", "香港", "澳门"),
year_from = 2019,
year_to = 2008,
convert_to = "name",
incomplete_name = "both",
province = TRUE,
to_pinyin = TRUE
)
library(regioncode)
library(regioncode)
knitr::opts_chunk$set(message = FALSE, warning = FALSE)
if(!require(regioncode)) install.packages("regioncode")
library(regioncode)
library(tidyverse)
library(regioncode)
data("corruption")
# Conversion to the 1989 version
regioncode(data_input = corruption$prefecture_id,
convert_to = "code", # default setting
year_from = 2019,
year_to = 1989)
# Comparison
tibble(
code2019 = corruption$prefecture_id,
code1989 = regioncode(data_input = corruption$prefecture_id,
convert_to = "code", # default setting
year_from = 2019,
year_to = 1989),
name2019 = regioncode(data_input = corruption$prefecture_id,
convert_to = "name", # default setting
year_from = 2019,
year_to = 2019),
name1989 = regioncode(data_input = corruption$prefecture_id,
convert_to = "name", # default setting
year_from = 2019,
year_to = 1989)
)
# Conversion to the 1989 version
regioncode(data_input = corruption$prefecture_id,
convert_to = "code", # default setting
year_from = 2019,
year_to = 1989)
corruption$prefecture_id
regioncode(data_input = corruption$prefecture_id,
convert_to = "code", # default setting
year_from = 2019,
year_to = 1989)
regioncode(data_input = corruption$prefecture_id,
convert_to = "name", # default setting
year_from = 2019,
year_to = 2019)
regioncode(data_input = corruption$prefecture_id,
convert_to = "name", # default setting
year_from = 2019,
year_to = 1989)
?switch
?case_when
`%>%`
?`%>%`
library(regioncode)
?bind_rows
library(regioncode)
knitr::opts_chunk$set(message = FALSE, warning = FALSE)
if(!require(regioncode)) install.packages("regioncode")
library(regioncode)
library(tidyverse)
# Regions with special spelling
regioncode(data_input = c("山西", "陕西", "内蒙古", "香港", "澳门"),
year_from = 2019,
year_to = 2008,
convert_to = "name",
incomplete_name = TRUE,
province = TRUE,
to_pinyin = TRUE
)
?ends_with
?pull
library(pkgdown)
build_site()
library(regioncode)
devtools::install(build_vignettes = TRUE)
pkgdown::build_site()
devtools::install(build_vignettes = TRUE)
pkgdown::build_site()
devtools::release()
devtools::install(build_vignettes = TRUE)
pkgdown::build_site()
devtools::release()
devtools::check(manual = TRUE)
library(regioncode)
devtools::check(manual = TRUE)
library(regioncode)
library(regioncode)
library(regioncode)
devtools::check(manual = TRUE)
here("sysdata.rda")
library(here)
here("sysdata.rda")
file.exists(here("sysdata.rda"))
file.exists(here("data", "sysdata.rda"))
file.exists(here("R", "sysdata.rda"))
save(here("R", "sysdata.rda"), file = here("R", "sysdata.rda"), compress = "bzip2")
load(here("R", "sysdata.rda"))
?save
save(corruption, region_data, file = here("R", "sysdata.rda"), compress = "bzip2")
devtools::check(manual = TRUE)
devtools::check(manual = TRUE)
pak::pak("r-lib/devtools")
library(devtools)
install(build_vignettes = TRUE)
check(manual = TRUE)
build_manual(pkg = ".", path = NULL)
build_manual(pkg = "regioncode", path = NULL)
system("R CMD Rd2pdf regioncode")
build_manual()
library(regioncode)
build_manual()
build_manual(path = "../regioncode")
rlang::last_trace()
setwd("D:/Seafile/WW_research/01_Research/R_package")
build_manual(pdf = TRUE)
build_manual()
setwd("D:/Seafile/WW_research/01_Research/R_package/regioncode")
build()
build(manual = TRUE)
check(manual = TRUE)
check(manual = TRUE)
remove.packages("regioncode")
install.packages("D:/Seafile/WW_research/01_Research/R_package/regioncode_0.1.2.tar.gz", repos = NULL, type = "source")
check(manual = TRUE)
## Vignette building
library(devtools)
check(manual = TRUE)
build_manual()
check(manual = TRUE)
library(regioncode)
library(devtools)
install(build_vignettes = TRUE)
check(manual = TRUE)
install(build_vignettes = TRUE)
library(regioncode)
install(build_vignettes = TRUE)
pkgdown::build_site()
## Spell checking
library(roxygen2)
ls_html <-
list.files(here("inst/tutorials"),
pattern = "*.html$",
recursive = TRUE,
full.names = TRUE)
devtools::release()
spell_check()
rhub::validate_email(email = "yuehu@tsinghua.edu.cn", token = "345011f4ca60404abf76007e9ae89e3e")
check_rhub(email = "yuehu@tsinghua.edu.cn")
devtools::release()
rhub::list_validated_emails()
check_rhub()
rhub::validate_email
rhub::validate_email()
check_rhub(email = "yuehu@tsinghua.edu.cn")
devtools::release()
?release()
